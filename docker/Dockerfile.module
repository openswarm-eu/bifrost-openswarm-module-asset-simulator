FROM node:20.19.1-slim

WORKDIR /opt/energy-community-asset-simulator/

# set up node environment
COPY package*.json ./
COPY tsconfig.json ./
RUN npm install

# copy module files
COPY data/ ./data/
COPY config/ ./config/
COPY src/ ./src/
COPY energy-community-asset-simulator.ts ./energy-community-asset-simulator.ts

RUN npm run tsc

CMD ["npm", "run", "module"]